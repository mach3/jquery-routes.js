/*!
 * jQuery-Routes
 * -------------
 * Router library for jQuery
 *
 * @version 0.1.0 (2014-04-14 01:56:31)
 * @author mach3 <http://github.com/mach3>
 * @license MIT
 * @require jQuery
 */
 !function(a){var b=function(){this._construct.apply(this,arguments)};!function(){var c=b.prototype,d={};c.EVENT_ERROR="error",c.EVENT_SUCCESS="success",c.defaults={mode:"path",bind:null,hook:a.noop,polyfillHashChange:!0},c.win=null,c.options=null,c.rules=null,c.emitter=null,c._construct=function(b){var c=this;this.win=a(window),this.options={},this.rules=[],this.emitter=a(this),this.resolve=a.proxy(this.resolve,this),this.config(this.defaults),b&&this.config(b),a.each(["on","off","trigger"],function(b,d){c[d]=a.proxy(c.emitter[d],c.emitter)})},c.config=function(b,c){switch(a.type(b)){case"object":return a.extend(!0,this.options,b),this;case"string":return arguments.length>1?(this.options[b]=c,this):this.options[b];case"undefined":return this.options}return this},c.add=function(b,c){var d=this;switch(a.type(b)){case"object":a.each(b,function(a,b){d.add(a,b)});break;case"array":a.each(b,function(a,b){d.add(b.rule,b.action)});break;case"string":this.rules.push({rule:b,regex:new RegExp(b),action:c})}return this},c.resolve=function(b){var c=this,e=!1,f=this.config();return b="string"===a.type(b)?b:"hash"===f.mode?location.hash.replace(/^#/,""):location.pathname,a.each(this.rules,function(g,h){var i,j=b.match(h.regex);return j?(i=d.toArray(j),a.isFunction(f.hook)&&f.hook.apply(f.bind,i),a.isFunction(h.action)&&h.action.apply(f.bind,i),c.trigger(c.EVENT_SUCCESS,i),e=!0,!1):void 0}),e||this.trigger(this.EVENT_ERROR,b),e},c.watch=function(){switch(this.config("mode")){case"hash":this.config("polyfillHashChange")&&d.watchHashChange(),this.win.on("hashchange",this.resolve);break;case"path":d.watchPathName(),this.win.on("pathchange",this.resolve)}return this},c.unwatch=function(){switch(this.config("mode")){case"hash":this.win.off("hashchange",this.resolve);break;case"path":this.win.off("pathchange",this.resolve)}return this},d.toArray=function(a){return Array.prototype.slice.call(a)},d.watch=function(b){var c=a.extend({win:a(window),name:null,prop:null,eventName:null,watch:!0,interval:33},b);return c[c.prop]=location[c.prop],c.watch=void 0===c.watch?!0:c.watch,c.process=function(){c[c.prop]!==location[c.prop]&&(c.win.trigger(c.eventName),c[c.prop]=location[c.prop])},!1===c.watch?clearInterval(c.win.data(c.name)):void(void 0===c.win.data(c.name)&&c.win.data(c.name,setInterval(c.process,c.interval)))},d.watchHashChange=function(b){a.support.hashchange||d.watch({name:"watchHashChange",prop:"hash",eventName:"hashchange",watch:b})},d.watchPathName=function(a){d.watch({name:"watchPathName",prop:"pathname",eventName:"pathchange",watch:a})}}(),a.Routes=b,a.extend(a.support,{hashchange:function(){var a=navigator.userAgent.match(/MSIE\s([\d\.]+);/);return a?parseInt(a[1],10)>=8:"onhashchange"in window}()})}(jQuery);